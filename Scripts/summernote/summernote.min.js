(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof module=="object"&&module.exports?module.exports=n(require("jquery")):n(window.jQuery)})(function($){"use strict";var func=function(){var n=function(n){return function(t){return n===t}},t=function(n,t){return n===t},i=function(n){return function(t,i){return t[n]===i[n]}},r=function(){return!0},u=function(){return!1},f=function(n){return function(){return!n.apply(n,arguments)}},e=function(n,t){return function(i){return n(i)&&t(i)}},o=function(n){return n},s=function(n,t){return function(){return n[t].apply(n,arguments)}},h=0,c=function(n){var t=++h+"";return n?n+t:t},l=function(n){var t=$(document);return{top:n.top+t.scrollTop(),left:n.left+t.scrollLeft(),width:n.right-n.left,height:n.bottom-n.top}},a=function(n){var i={};for(var t in n)n.hasOwnProperty(t)&&(i[n[t]]=t);return i},v=function(n,t){return t=t||"",t+n.split(".").map(function(n){return n.substring(0,1).toUpperCase()+n.substring(1)}).join("")},y=function(n,t,i){var r;return function(){var u=this,f=arguments,e=function(){r=null;i||n.apply(u,f)},o=i&&!r;clearTimeout(r);r=setTimeout(e,t);o&&n.apply(u,f)}};return{eq:n,eq2:t,peq2:i,ok:r,fail:u,self:o,not:f,and:e,invoke:s,uniqueId:c,rect2bnd:l,invertObject:a,namespaceToCamel:v,debounce:y}}(),list=function(){var i=function(n){return n[0]},n=function(n){return n[n.length-1]},f=function(n){return n.slice(0,n.length-1)},r=function(n){return n.slice(1)},e=function(n,t){for(var r,i=0,u=n.length;i<u;i++)if(r=n[i],t(r))return r},o=function(n,t){for(var i=0,r=n.length;i<r;i++)if(!t(n[i]))return!1;return!0},t=function(n,t){return $.inArray(t,n)},u=function(n,i){return t(n,i)!==-1},s=function(n,t){return t=t||func.self,n.reduce(function(n,i){return n+t(i)},0)},h=function(n){for(var i=[],t=-1,r=n.length;++t<r;)i[t]=n[t];return i},c=function(n){return!n||!n.length},l=function(t,u){if(!t.length)return[];var f=r(t);return f.reduce(function(t,i){var r=n(t);return u(n(r),i)?r[r.length]=i:t[t.length]=[i],t},[[i(t)]])},a=function(n){for(var i=[],t=0,r=n.length;t<r;t++)n[t]&&i.push(n[t]);return i},v=function(n){for(var i=[],t=0,r=n.length;t<r;t++)u(i,n[t])||i.push(n[t]);return i},y=function(n,i){var r=t(n,i);return r===-1?null:n[r+1]},p=function(n,i){var r=t(n,i);return r===-1?null:n[r-1]};return{head:i,last:n,initial:f,tail:r,prev:p,next:y,find:e,contains:u,all:o,sum:s,from:h,isEmpty:c,clusterBy:l,compact:a,unique:v}}(),isSupportAmd=typeof define=="function"&&define.amd,isFontInstalled=function(n){var i=n==="Comic Sans MS"?"Courier New":"Comic Sans MS",t=$("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),r=t.css("fontFamily",i).width(),u=t.css("fontFamily",n+","+i).width();return t.remove(),r!==u},userAgent=navigator.userAgent,isMSIE=/MSIE|Trident/i.test(userAgent),browserVersion,matches,isEdge,hasCodeMirror;if(isMSIE&&(matches=/MSIE (\d+[.]\d+)/.exec(userAgent),matches&&(browserVersion=parseFloat(matches[1])),matches=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(userAgent),matches&&(browserVersion=parseFloat(matches[1]))),isEdge=/Edge\/\d+/.test(userAgent),hasCodeMirror=!!window.CodeMirror,!hasCodeMirror&&isSupportAmd&&typeof require!="undefined")if(typeof require.resolve!="undefined")try{require.resolve("codemirror");hasCodeMirror=!0}catch(e){}else typeof eval("require").specified!="undefined"&&(hasCodeMirror=eval("require").specified("codemirror"));var agent={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:isMSIE,isEdge:isEdge,isFF:!isEdge&&/firefox/i.test(userAgent),isPhantom:/PhantomJS/i.test(userAgent),isWebkit:!isEdge&&/webkit/i.test(userAgent),isChrome:!isEdge&&/chrome/i.test(userAgent),isSafari:!isEdge&&/safari/i.test(userAgent),browserVersion:browserVersion,jqueryVersion:parseFloat($.fn.jquery),isSupportAmd:isSupportAmd,hasCodeMirror:hasCodeMirror,isFontInstalled:isFontInstalled,isW3CRangeSupport:!!document.createRange},NBSP_CHAR=String.fromCharCode(160),ZERO_WIDTH_NBSP_CHAR="ï»¿",dom=function(){var i=function(n){return n&&$(n).hasClass("note-editable")},kt=function(n){return n&&$(n).hasClass("note-control-sizing")},n=function(n){return n=n.toUpperCase(),function(t){return t&&t.nodeName.toUpperCase()===n}},r=function(n){return n&&n.nodeType===3},dt=function(n){return n&&n.nodeType===1},o=function(n){return n&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(n.nodeName.toUpperCase())},u=function(n){return i(n)?!1:n&&/^DIV|^P|^LI|^H[1-7]/.test(n.nodeName.toUpperCase())},gt=function(n){return n&&/^H[1-7]/.test(n.nodeName.toUpperCase())},ni=n("PRE"),tt=n("LI"),ti=function(n){return u(n)&&!tt(n)},it=n("TABLE"),rt=n("DATA"),s=function(n){return!p(n)&&!ut(n)&&!ii(n)&&!u(n)&&!it(n)&&!y(n)&&!rt(n)},ut=function(n){return n&&/^UL|^OL/.test(n.nodeName.toUpperCase())},ii=n("HR"),ft=function(n){return n&&/^TD|^TH/.test(n.nodeName.toUpperCase())},y=n("BLOCKQUOTE"),p=function(n){return ft(n)||y(n)||i(n)},et=n("A"),ri=function(n){return s(n)&&!!c(n,u)},ui=function(n){return s(n)&&!c(n,u)},fi=n("BODY"),ei=function(n,t){return n.nextSibling===t||n.previousSibling===t},oi=function(n,t){t=t||func.ok;var i=[];return n.previousSibling&&t(n.previousSibling)&&i.push(n.previousSibling),i.push(n),n.nextSibling&&t(n.nextSibling)&&i.push(n.nextSibling),i},h=agent.isMSIE&&agent.browserVersion<11?"&nbsp;":"<br>",t=function(n){return r(n)?n.nodeValue.length:n?n.childNodes.length:0},w=function(n){var i=t(n);if(i===0)return!0;if(r(n)||i!==1||n.innerHTML!==h){if(list.all(n.childNodes,r)&&n.innerHTML==="")return!0}else return!0;return!1},ot=function(n){o(n)||t(n)||(n.innerHTML=h)},c=function(n,t){while(n){if(t(n))return n;if(i(n))break;n=n.parentNode}return null},si=function(n,r){for(n=n.parentNode;n;){if(t(n)!==1)break;if(r(n))return n;if(i(n))break;n=n.parentNode}return null},f=function(n,t){t=t||func.fail;var r=[];return c(n,function(n){return i(n)||r.push(n),t(n)}),r},hi=function(n,t){var i=f(n);return list.last(i.filter(t))},ci=function(n,t){for(var r=f(n),i=t;i;i=i.parentNode)if($.inArray(i,r)>-1)return i;return null},li=function(n,t){t=t||func.fail;for(var i=[];n;){if(t(n))break;i.push(n);n=n.previousSibling}return i},st=function(n,t){t=t||func.fail;for(var i=[];n;){if(t(n))break;i.push(n);n=n.nextSibling}return i},ai=function(n,t){var i=[];return t=t||func.ok,function r(u){n!==u&&t(u)&&i.push(u);for(var f=0,e=u.childNodes.length;f<e;f++)r(u.childNodes[f])}(n),i},vi=function(n,t){var r=n.parentNode,i=$("<"+t+">")[0];return r.insertBefore(i,n),i.appendChild(n),i},b=function(n,t){var i=t.nextSibling,r=t.parentNode;return i?r.insertBefore(n,i):r.appendChild(n),n},k=function(n,t){return $.each(t,function(t,i){n.appendChild(i)}),n},l=function(n){return n.offset===0},a=function(n){return n.offset===t(n.node)},ht=function(n){return l(n)||a(n)},ct=function(n,t){while(n&&n!==t){if(e(n)!==0)return!1;n=n.parentNode}return!0},lt=function(n,i){if(!i)return!1;while(n&&n!==i){if(e(n)!==t(n.parentNode)-1)return!1;n=n.parentNode}return!0},yi=function(n,t){return l(n)&&ct(n.node,t)},pi=function(n,t){return a(n)&&lt(n.node,t)},e=function(n){for(var t=0;n=n.previousSibling;)t+=1;return t},v=function(n){return!!(n&&n.childNodes&&n.childNodes.length)},at=function(n,r){var u,f;if(n.offset===0){if(i(n.node))return null;u=n.node.parentNode;f=e(n.node)}else v(n.node)?(u=n.node.childNodes[n.offset-1],f=t(u)):(u=n.node,f=r?0:n.offset-1);return{node:u,offset:f}},d=function(n,r){var u,f;if(t(n.node)===n.offset){if(i(n.node))return null;u=n.node.parentNode;f=e(n.node)+1}else v(n.node)?(u=n.node.childNodes[n.offset],f=0):(u=n.node,f=r?t(n.node):n.offset+1);return{node:u,offset:f}},vt=function(n,t){return n.node===t.node&&n.offset===t.offset},wi=function(n){if(r(n.node)||!v(n.node)||w(n.node))return!0;var t=n.node.childNodes[n.offset-1],i=n.node.childNodes[n.offset];return(!t||o(t))&&(!i||o(i))?!0:!1},bi=function(n,t){while(n){if(t(n))return n;n=at(n)}return null},ki=function(n,t){while(n){if(t(n))return n;n=d(n)}return null},di=function(n){if(!r(n.node))return!1;var t=n.node.nodeValue.charAt(n.offset-1);return t&&t!==" "&&t!==NBSP_CHAR},gi=function(n,t,i,r){for(var u=n,f;u;){if(i(u),vt(u,t))break;f=r&&n.node!==u.node&&t.node!==u.node;u=d(u,f)}},nr=function(n,t){var i=f(t,func.eq(n));return i.map(e).reverse()},tr=function(n,t){for(var i=n,r=0,u=t.length;r<u;r++)i=i.childNodes.length<=t[r]?i.childNodes[i.childNodes.length-1]:i.childNodes[t[r]];return i},g=function(n,t){var f=t&&t.isSkipPaddingBlankHTML,e=t&&t.isNotSplitEdgePoint,u,i;if(ht(n)&&(r(n.node)||e)){if(l(n))return n.node;if(a(n))return n.node.nextSibling}return r(n.node)?n.node.splitText(n.offset):(u=n.node.childNodes[n.offset],i=b(n.node.cloneNode(!1),n.node),k(i,st(u)),f||(ot(n.node),ot(i)),i)},yt=function(n,i,r){var u=f(i.node,func.eq(n));if(u.length){if(u.length===1)return g(i,r)}else return null;return u.reduce(function(n,u){return n===i.node&&(n=g(i,r)),g({node:u,offset:n?dom.position(n):t(u)},r)})},ir=function(n,t){var h=t?u:p,o=f(n.node,h),s=list.last(o)||n.node,i,r,e;return h(s)?(i=o[o.length-2],r=s):(i=s,r=i.parentNode),e=i&&yt(i,n,{isSkipPaddingBlankHTML:t,isNotSplitEdgePoint:t}),e||r!==n.node||(e=n.node.childNodes[n.offset]),{rightNode:e,container:r}},pt=function(n){return document.createElement(n)},rr=function(n){return document.createTextNode(n)},nt=function(n,t){var f,r,i,u;if(n&&n.parentNode){if(n.removeNode)return n.removeNode(t);if(f=n.parentNode,!t){for(r=[],i=0,u=n.childNodes.length;i<u;i++)r.push(n.childNodes[i]);for(i=0,u=r.length;i<u;i++)f.insertBefore(r[i],n)}f.removeChild(n)}},ur=function(n,t){while(n){if(i(n)||!t(n))break;var r=n.parentNode;nt(n);n=r}},fr=function(n,t){if(n.nodeName.toUpperCase()===t.toUpperCase())return n;var i=pt(t);return n.style.cssText&&(i.style.cssText=n.style.cssText),k(i,list.from(n.childNodes)),b(i,n),nt(n),i},wt=n("TEXTAREA"),bt=function(n,t){var i=wt(n[0])?n.val():n.html();return t,i},er=function(n,t){var i=bt(n),r;return t&&(r=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g,i=i.replace(r,function(n,t,i){i=i.toUpperCase();var r=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(i)&&!!t,u=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(i);return n+(r||u?"\n":"")}),i=$.trim(i)),i},or=function(n){var t=$(n),i=t.offset(),r=t.outerHeight(!0);return{left:i.left,top:i.top+r}},sr=function(n,t){Object.keys(t).forEach(function(i){n.on(i,t[i])})},hr=function(n,t){Object.keys(t).forEach(function(i){n.off(i,t[i])})};return{NBSP_CHAR:NBSP_CHAR,ZERO_WIDTH_NBSP_CHAR:ZERO_WIDTH_NBSP_CHAR,blank:h,emptyPara:"<p>"+h+"<\/p>",makePredByNodeName:n,isEditable:i,isControlSizing:kt,isText:r,isElement:dt,isVoid:o,isPara:u,isPurePara:ti,isHeading:gt,isInline:s,isBlock:func.not(s),isBodyInline:ui,isBody:fi,isParaInline:ri,isPre:ni,isList:ut,isTable:it,isData:rt,isCell:ft,isBlockquote:y,isBodyContainer:p,isAnchor:et,isDiv:n("DIV"),isLi:tt,isBR:n("BR"),isSpan:n("SPAN"),isB:n("B"),isU:n("U"),isS:n("S"),isI:n("I"),isImg:n("IMG"),isTextarea:wt,isEmpty:w,isEmptyAnchor:func.and(et,w),isClosestSibling:ei,withClosestSiblings:oi,nodeLength:t,isLeftEdgePoint:l,isRightEdgePoint:a,isEdgePoint:ht,isLeftEdgeOf:ct,isRightEdgeOf:lt,isLeftEdgePointOf:yi,isRightEdgePointOf:pi,prevPoint:at,nextPoint:d,isSamePoint:vt,isVisiblePoint:wi,prevPointUntil:bi,nextPointUntil:ki,isCharPoint:di,walkPoint:gi,ancestor:c,singleChildAncestor:si,listAncestor:f,lastAncestor:hi,listNext:st,listPrev:li,listDescendant:ai,commonAncestor:ci,wrap:vi,insertAfter:b,appendChildNodes:k,position:e,hasChildren:v,makeOffsetPath:nr,fromOffsetPath:tr,splitTree:yt,splitPoint:ir,create:pt,createText:rr,remove:nt,removeWhile:ur,replace:fr,html:er,value:bt,posFromPlaceholder:or,attachEvents:sr,detachEvents:hr}}(),Context=function(n,t){var i=this,r=$.summernote.ui;return this.memos={},this.modules={},this.layoutInfo={},this.options=t,this.initialize=function(){return this.layoutInfo=r.createLayout(n,t),this._initialize(),n.hide(),this},this.destroy=function(){this._destroy();n.removeData("summernote");r.removeLayout(n,this.layoutInfo)},this.reset=function(){var n=i.isDisabled();this.code(dom.emptyPara);this._destroy();this._initialize();n&&i.disable()},this._initialize=function(){var t=$.extend({},this.options.buttons),n;Object.keys(t).forEach(function(n){i.memo("button."+n,t[n])});n=$.extend({},this.options.modules,$.summernote.plugins||{});Object.keys(n).forEach(function(t){i.module(t,n[t],!0)});Object.keys(this.modules).forEach(function(n){i.initializeModule(n)})},this._destroy=function(){Object.keys(this.modules).reverse().forEach(function(n){i.removeModule(n)});Object.keys(this.memos).forEach(function(n){i.removeMemo(n)})},this.code=function(t){var i=this.invoke("codeview.isActivated");if(t===undefined)return this.invoke("codeview.sync"),i?this.layoutInfo.codable.val():this.layoutInfo.editable.html();i?this.layoutInfo.codable.val(t):this.layoutInfo.editable.html(t);n.val(t);this.triggerEvent("change",t)},this.isDisabled=function(){return this.layoutInfo.editable.attr("contenteditable")==="false"},this.enable=function(){this.layoutInfo.editable.attr("contenteditable",!0);this.invoke("toolbar.activate",!0)},this.disable=function(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate");this.layoutInfo.editable.attr("contenteditable",!1);this.invoke("toolbar.deactivate",!0)},this.triggerEvent=function(){var t=list.head(arguments),i=list.tail(list.from(arguments)),r=this.options.callbacks[func.namespaceToCamel(t,"on")];r&&r.apply(n[0],i);n.trigger("summernote."+t,i)},this.initializeModule=function(t){var i=this.modules[t];(i.shouldInitialize=i.shouldInitialize||func.ok,i.shouldInitialize())&&(i.initialize&&i.initialize(),i.events&&dom.attachEvents(n,i.events))},this.module=function(n,t,i){if(arguments.length===1)return this.modules[n];this.modules[n]=new t(this);i||this.initializeModule(n)},this.removeModule=function(t){var i=this.modules[t];i.shouldInitialize()&&(i.events&&dom.detachEvents(n,i.events),i.destroy&&i.destroy());delete this.modules[t]},this.memo=function(n,t){if(arguments.length===1)return this.memos[n];this.memos[n]=t},this.removeMemo=function(n){this.memos[n]&&this.memos[n].destroy&&this.memos[n].destroy();delete this.memos[n]},this.createInvokeHandler=function(n,t){return function(r){r.preventDefault();i.invoke(n,t||$(r.target).closest("[data-value]").data("value"))}},this.invoke=function(){var e=list.head(arguments),r=list.tail(list.from(arguments)),t=e.split("."),u=t.length>1,f=u&&list.head(t),i=u?list.last(t):list.head(t),n=this.modules[f||"editor"];return!f&&this[i]?this[i].apply(this,r):n&&n[i]&&n.shouldInitialize()?n[i].apply(n,r):void 0},this.initialize()};$.fn.extend({summernote:function(){var r=$.type(list.head(arguments)),u=r==="string",f=r==="object",n=f?list.head(arguments):{},i,t;if(n=$.extend({},$.summernote.options,n),n.langInfo=$.extend(!0,{},$.summernote.lang["en-US"],$.summernote.lang[n.lang]),n.icons=$.extend(!0,{},$.summernote.options.icons,n.icons),this.each(function(t,i){var r=$(i),u;r.data("summernote")||(u=new Context(r,n),r.data("summernote",u),r.data("summernote").triggerEvent("init",u.layoutInfo))}),i=this.first(),i.length){if(t=i.data("summernote"),u)return t.invoke.apply(t,list.from(arguments));n.focus&&t.invoke("editor.focus")}return this}});var Renderer=function(n,t,i,r){this.render=function(u){var f=$(n),e;if(i&&i.contents&&f.html(i.contents),i&&i.className&&f.addClass(i.className),i&&i.data&&$.each(i.data,function(n,t){f.attr("data-"+n,t)}),i&&i.click)f.on("click",i.click);return t&&(e=f.find(".note-children-container"),t.forEach(function(n){n.render(e.length?e:f)})),r&&r(f,i),i&&i.callback&&i.callback(f),u&&u.append(f),f}},renderer={create:function(n,t){return function(){var r=$.isArray(arguments[0])?arguments[0]:[],i=typeof arguments[1]=="object"?arguments[1]:arguments[0];return i&&i.children&&(r=i.children),new Renderer(n,r,i,t)}}},editor=renderer.create('<div class="note-editor note-frame panel panel-default"/>'),toolbar=renderer.create('<div class="note-toolbar panel-heading"/>'),editingArea=renderer.create('<div class="note-editing-area"/>'),codable=renderer.create('<textarea class="note-codable"/>'),editable=renderer.create('<div class="note-editable panel-body" contentEditable="true"/>'),statusbar=renderer.create('<div class="note-statusbar">  <div class="note-resizebar">    <div class="note-icon-bar"/>    <div class="note-icon-bar"/>    <div class="note-icon-bar"/>  <\/div><\/div>'),airEditor=renderer.create('<div class="note-editor"/>'),airEditable=renderer.create('<div class="note-editable" contentEditable="true"/>'),buttonGroup=renderer.create('<div class="note-btn-group btn-group">'),button=renderer.create('<button type="button" class="note-btn btn btn-default btn-sm" tabindex="-1">',function(n,t){t&&t.tooltip&&n.attr({title:t.tooltip}).tooltip({trigger:"hover",placement:"bottom"})}),dropdown=renderer.create('<div class="dropdown-menu">',function(n,t){var i=$.isArray(t.items)?t.items.map(function(n){var i=typeof n=="string"?n:n.value||"",r=t.template?t.template(n):n;return'<li><a href="#" data-value="'+i+'">'+r+"<\/a><\/li>"}).join(""):t.items;n.html(i)}),dropdownCheck=renderer.create('<div class="dropdown-menu note-check">',function(n,t){var i=$.isArray(t.items)?t.items.map(function(n){var i=typeof n=="string"?n:n.value||"",r=t.template?t.template(n):n;return'<li><a href="#" data-value="'+i+'">'+icon(t.checkClassName)+" "+r+"<\/a><\/li>"}).join(""):t.items;n.html(i)}),palette=renderer.create('<div class="note-color-palette"/>',function(n,t){for(var i,s,r,f=[],u=0,h=t.colors.length;u<h;u++){var c=t.eventName,e=t.colors[u],o=[];for(i=0,s=e.length;i<s;i++)r=e[i],o.push(['<button type="button" class="note-color-btn"','style="background-color:',r,'" ','data-event="',c,'" ','data-value="',r,'" ','title="',r,'" ','data-toggle="button" tabindex="-1"><\/button>'].join(""));f.push('<div class="note-color-row">'+o.join("")+"<\/div>")}n.html(f.join(""));n.find(".note-color-btn").tooltip({container:"body",trigger:"hover",placement:"bottom"})}),dialog=renderer.create('<div class="modal" aria-hidden="false" tabindex="-1"/>',function(n,t){t.fade&&n.addClass("fade");n.html(['<div class="modal-dialog">','  <div class="modal-content">',t.title?'    <div class="modal-header">      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;<\/span><\/button>      <h4 class="modal-title">'+t.title+"<\/h4>    <\/div>":"",'    <div class="modal-body">'+t.body+"<\/div>",t.footer?'    <div class="modal-footer">'+t.footer+"<\/div>":"","  <\/div>","<\/div>"].join(""))}),popover=renderer.create('<div class="note-popover popover in">  <div class="arrow"/>  <div class="popover-content note-children-container"/><\/div>',function(n,t){var i=typeof t.direction!="undefined"?t.direction:"bottom";n.addClass(i);t.hideArrow&&n.find(".arrow").hide()}),icon=function(n,t){return t=t||"i","<"+t+' class="'+n+'"/>'},ui={editor:editor,toolbar:toolbar,editingArea:editingArea,codable:codable,editable:editable,statusbar:statusbar,airEditor:airEditor,airEditable:airEditable,buttonGroup:buttonGroup,button:button,dropdown:dropdown,dropdownCheck:dropdownCheck,palette:palette,dialog:dialog,popover:popover,icon:icon,toggleBtn:function(n,t){n.toggleClass("disabled",!t);n.attr("disabled",!t)},toggleBtnActive:function(n,t){n.toggleClass("active",t)},onDialogShown:function(n,t){n.one("shown.bs.modal",t)},onDialogHidden:function(n,t){n.one("hidden.bs.modal",t)},showDialog:function(n){n.modal("show")},hideDialog:function(n){n.modal("hide")},createLayout:function(n,t){var i=(t.airMode?ui.airEditor([ui.editingArea([ui.airEditable()])]):ui.editor([ui.toolbar(),ui.editingArea([ui.codable(),ui.editable()]),ui.statusbar()])).render();return i.insertAfter(n),{note:n,editor:i,toolbar:i.find(".note-toolbar"),editingArea:i.find(".note-editing-area"),editable:i.find(".note-editable"),codable:i.find(".note-codable"),statusbar:i.find(".note-statusbar")}},removeLayout:function(n,t){n.html(t.editable.html());t.editor.remove();n.show()}};$.summernote=$.summernote||{lang:{}};$.extend($.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var key=function(){var n={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(t){return list.contains([n.BACKSPACE,n.TAB,n.ENTER,n.SPACE],t)},isMove:function(t){return list.contains([n.LEFT,n.UP,n.RIGHT,n.DOWN],t)},nameFromCode:func.invertObject(n),code:n}}(),range=function(){var t=function(n,t){for(var f=n.parentElement(),c=document.body.createTextRange(),e,o=list.from(f.childNodes),s,i,h,u,l,r=0;r<o.length;r++)if(!dom.isText(o[r])){if(c.moveToElementText(o[r]),c.compareEndPoints("StartToStart",n)>=0)break;e=o[r]}if(r!==0&&dom.isText(o[r-1])){for(s=document.body.createTextRange(),i=null,s.moveToElementText(e||f),s.collapse(!e),i=e?e.nextSibling:f.firstChild,h=n.duplicate(),h.setEndPoint("StartToStart",s),u=h.text.replace(/[\r\n]/g,"").length;u>i.nodeValue.length&&i.nextSibling;)u-=i.nodeValue.length,i=i.nextSibling;l=i.nodeValue;t&&i.nextSibling&&dom.isText(i.nextSibling)&&u===i.nodeValue.length&&(u-=i.nodeValue.length,i=i.nextSibling);f=i;r=u}return{cont:f,offset:r}},i=function(n){var r=function(n,t){var i,u,f,e;if(dom.isText(n))f=dom.listPrev(n,func.not(dom.isText)),e=list.last(f).previousSibling,i=e||n.parentNode,t+=list.sum(list.tail(f),dom.nodeLength),u=!e;else{if(i=n.childNodes[t]||n,dom.isText(i))return r(i,0);t=0;u=!1}return{node:i,collapseToStart:u,offset:t}},t=document.body.createTextRange(),i=r(n.node,n.offset);return t.moveToElementText(i.node),t.collapse(i.collapseToStart),t.moveStart("character",i.offset),t},n=function(t,r,u,f){var o,e;this.sc=t;this.so=r;this.ec=u;this.eo=f;o=function(){var n,e;return agent.isW3CRangeSupport?(n=document.createRange(),n.setStart(t,r),n.setEnd(u,f),n):(e=i({node:t,offset:r}),e.setEndPoint("EndToEnd",i({node:u,offset:f})),e)};this.getPoints=function(){return{sc:t,so:r,ec:u,eo:f}};this.getStartPoint=function(){return{node:t,offset:r}};this.getEndPoint=function(){return{node:u,offset:f}};this.select=function(){var t=o(),n;return agent.isW3CRangeSupport?(n=document.getSelection(),n.rangeCount>0&&n.removeAllRanges(),n.addRange(t)):t.select(),this};this.scrollIntoView=function(n){var t=$(n).height();return n.scrollTop+t<this.sc.offsetTop&&(n.scrollTop+=Math.abs(n.scrollTop+t-this.sc.offsetTop)),this};this.normalize=function(){var i=function(n,t){var i,r;if(dom.isVisiblePoint(n)&&!dom.isEdgePoint(n)||dom.isVisiblePoint(n)&&dom.isRightEdgePoint(n)&&!t||dom.isVisiblePoint(n)&&dom.isLeftEdgePoint(n)&&t||dom.isVisiblePoint(n)&&dom.isBlock(n.node)&&dom.isEmpty(n.node))return n;if(i=dom.ancestor(n.node,dom.isBlock),(dom.isLeftEdgePointOf(n,i)||dom.isVoid(dom.prevPoint(n).node))&&!t||(dom.isRightEdgePointOf(n,i)||dom.isVoid(dom.nextPoint(n).node))&&t){if(dom.isVisiblePoint(n))return n;t=!t}return r=t?dom.nextPointUntil(dom.nextPoint(n),dom.isVisiblePoint):dom.prevPointUntil(dom.prevPoint(n),dom.isVisiblePoint),r||n},t=i(this.getEndPoint(),!1),r=this.isCollapsed()?t:i(this.getStartPoint(),!0);return new n(r.node,r.offset,t.node,t.offset)};this.nodes=function(n,t){n=n||func.ok;var u=t&&t.includeAncestor,f=t&&t.fullyContains,e=this.getStartPoint(),o=this.getEndPoint(),i=[],r=[];return dom.walkPoint(e,o,function(t){if(!dom.isEditable(t.node)){var e;f?(dom.isLeftEdgePoint(t)&&r.push(t.node),dom.isRightEdgePoint(t)&&list.contains(r,t.node)&&(e=t.node)):e=u?dom.ancestor(t.node,n):t.node;e&&n(e)&&i.push(e)}},!0),list.unique(i)};this.commonAncestor=function(){return dom.commonAncestor(t,u)};this.expand=function(i){var s=dom.ancestor(t,i),o=dom.ancestor(u,i),e;return!s&&!o?new n(t,r,u,f):(e=this.getPoints(),s&&(e.sc=s,e.so=0),o&&(e.ec=o,e.eo=dom.nodeLength(o)),new n(e.sc,e.so,e.ec,e.eo))};this.collapse=function(i){return i?new n(t,r,t,r):new n(u,f,u,f)};this.splitText=function(){var e=t===u,i=this.getPoints();return dom.isText(u)&&!dom.isEdgePoint(this.getEndPoint())&&u.splitText(f),dom.isText(t)&&!dom.isEdgePoint(this.getStartPoint())&&(i.sc=t.splitText(r),i.so=0,e&&(i.ec=i.sc,i.eo=f-r)),new n(i.sc,i.so,i.ec,i.eo)};this.deleteContents=function(){if(this.isCollapsed())return this;var i=this.splitText(),r=i.nodes(null,{fullyContains:!0}),t=dom.prevPointUntil(i.getStartPoint(),function(n){return!list.contains(r,n.node)}),u=[];return $.each(r,function(n,i){var r=i.parentNode;t.node!==r&&dom.nodeLength(r)===1&&u.push(r);dom.remove(i,!1)}),$.each(u,function(n,t){dom.remove(t,!1)}),new n(t.node,t.offset,t.node,t.offset).normalize()};e=function(n){return function(){var i=dom.ancestor(t,n);return!!i&&i===dom.ancestor(u,n)}};this.isOnEditable=e(dom.isEditable);this.isOnList=e(dom.isList);this.isOnAnchor=e(dom.isAnchor);this.isOnCell=e(dom.isCell);this.isOnData=e(dom.isData);this.isLeftEdgeOf=function(n){if(!dom.isLeftEdgePoint(this.getStartPoint()))return!1;var t=dom.ancestor(this.sc,n);return t&&dom.isLeftEdgeOf(this.sc,t)};this.isCollapsed=function(){return t===u&&r===f};this.wrapBodyInlineWithPara=function(){var i,r,f,u,e;return dom.isBodyContainer(t)&&dom.isEmpty(t)?(t.innerHTML=dom.emptyPara,new n(t.firstChild,0,t.firstChild,0)):(i=this.normalize(),dom.isParaInline(t)||dom.isPara(t))?i:(dom.isInline(i.sc)?(f=dom.listAncestor(i.sc,func.not(dom.isInline)),r=list.last(f),dom.isInline(r)||(r=f[f.length-2]||i.sc.childNodes[i.so])):r=i.sc.childNodes[i.so>0?i.so-1:0],u=dom.listPrev(r,dom.isParaInline).reverse(),u=u.concat(dom.listNext(r.nextSibling,dom.isParaInline)),u.length&&(e=dom.wrap(list.head(u),"p"),dom.appendChildNodes(e,list.tail(u))),this.normalize())};this.insertNode=function(n){var i=this.wrapBodyInlineWithPara().deleteContents(),t=dom.splitPoint(i.getStartPoint(),dom.isInline(n));return t.rightNode?t.rightNode.parentNode.insertBefore(n,t.rightNode):t.container.appendChild(n),n};this.pasteHTML=function(n){var t=$("<div><\/div>").html(n)[0],i=list.from(t.childNodes),r=this.wrapBodyInlineWithPara().deleteContents();return i.reverse().map(function(n){return r.insertNode(n)}).reverse()};this.toString=function(){var n=o();return agent.isW3CRangeSupport?n.toString():n.text};this.getWordRange=function(t){var i=this.getEndPoint(),r;return dom.isCharPoint(i)?(r=dom.prevPointUntil(i,function(n){return!dom.isCharPoint(n)}),t&&(i=dom.nextPointUntil(i,function(n){return!dom.isCharPoint(n)})),new n(r.node,r.offset,i.node,i.offset)):this};this.bookmark=function(n){return{s:{path:dom.makeOffsetPath(n,t),offset:r},e:{path:dom.makeOffsetPath(n,u),offset:f}}};this.paraBookmark=function(n){return{s:{path:list.tail(dom.makeOffsetPath(list.head(n),t)),offset:r},e:{path:list.tail(dom.makeOffsetPath(list.last(n),u)),offset:f}}};this.getClientRects=function(){var n=o();return n.getClientRects()}};return{create:function(t,i,r,u){if(arguments.length===4)return new n(t,i,r,u);if(arguments.length===2)return r=t,u=i,new n(t,i,r,u);var f=this.createFromSelection();return!f&&arguments.length===1?(f=this.createFromNode(arguments[0]),f.collapse(dom.emptyPara===arguments[0].innerHTML)):f},createFromSelection:function(){var e,o,s,h,u,f,c,l,a,i,r;if(agent.isW3CRangeSupport){if(u=document.getSelection(),u&&u.rangeCount!==0){if(dom.isBody(u.anchorNode))return null}else return null;f=u.getRangeAt(0);e=f.startContainer;o=f.startOffset;s=f.endContainer;h=f.endOffset}else c=document.selection.createRange(),l=c.duplicate(),l.collapse(!1),a=c,a.collapse(!0),i=t(a,!0),r=t(l,!1),dom.isText(i.node)&&dom.isLeftEdgePoint(i)&&dom.isTextNode(r.node)&&dom.isRightEdgePoint(r)&&r.node.nextSibling===i.node&&(i=r),e=i.cont,o=i.offset,s=r.cont,h=r.offset;return new n(e,o,s,h)},createFromNode:function(n){var i=n,u=0,t=n,r=dom.nodeLength(t);return dom.isVoid(i)&&(u=dom.listPrev(i).length-1,i=i.parentNode),dom.isBR(t)?(r=dom.listPrev(t).length-1,t=t.parentNode):dom.isVoid(t)&&(r=dom.listPrev(t).length,t=t.parentNode),this.create(i,u,t,r)},createFromNodeBefore:function(n){return this.createFromNode(n).collapse(!0)},createFromNodeAfter:function(n){return this.createFromNode(n).collapse()},createFromBookmark:function(t,i){var r=dom.fromOffsetPath(t,i.s.path),u=i.s.offset,f=dom.fromOffsetPath(t,i.e.path),e=i.e.offset;return new n(r,u,f,e)},createFromParaBookmark:function(t,i){var r=t.s.offset,u=t.e.offset,f=dom.fromOffsetPath(list.head(i),t.s.path),e=dom.fromOffsetPath(list.last(i),t.e.path);return new n(f,r,e,u)}}}(),async=function(){var n=function(n){return $.Deferred(function(t){$.extend(new FileReader,{onload:function(n){var i=n.target.result;t.resolve(i)},onerror:function(){t.reject(this)}}).readAsDataURL(n)}).promise()},t=function(n){return $.Deferred(function(t){var i=$("<img>");i.one("load",function(){i.off("error abort");t.resolve(i)}).one("error abort",function(){i.off("load").detach();t.reject(i)}).css({display:"none"}).appendTo(document.body).attr("src",n)}).promise()};return{readFileAsDataURL:n,createImage:t}}(),History=function(n){var i=[],t=-1,r=n[0],f=function(){var t=range.create(r);return{contents:n.html(),bookmark:t?t.bookmark(r):{s:{path:[],offset:0},e:{path:[],offset:0}}}},u=function(t){t.contents!==null&&n.html(t.contents);t.bookmark!==null&&range.createFromBookmark(r,t.bookmark).select()};this.rewind=function(){n.html()!==i[t].contents&&this.recordUndo();t=0;u(i[t])};this.reset=function(){i=[];t=-1;n.html("");this.recordUndo()};this.undo=function(){n.html()!==i[t].contents&&this.recordUndo();0<t&&(t--,u(i[t]))};this.redo=function(){i.length-1>t&&(t++,u(i[t]))};this.recordUndo=function(){t++;i.length>t&&(i=i.slice(0,t));i.push(f())}},Style=function(){var n=function(n,t){if(agent.jqueryVersion<1.9){var i={};return $.each(t,function(t,r){i[r]=n.css(r)}),i}return n.css.call(n,t)};this.fromNode=function(t){var i=n(t,["font-family","font-size","text-align","list-style-type","line-height"])||{};return i["font-size"]=parseInt(i["font-size"],10),i};this.stylePara=function(n,t){$.each(n.nodes(dom.isPara,{includeAncestor:!0}),function(n,i){$(i).css(t)})};this.styleNodes=function(n,t){var i,u,f;n=n.splitText();var r=t&&t.nodeName||"SPAN",e=!!(t&&t.expandClosestSibling),o=!!(t&&t.onlyPartialContains);return n.isCollapsed()?[n.insertNode(dom.create(r))]:(i=dom.makePredByNodeName(r),u=n.nodes(dom.isText,{fullyContains:!0}).map(function(n){return dom.singleChildAncestor(n,i)||dom.wrap(n,r)}),e?(o&&(f=n.nodes(),i=func.and(i,function(n){return list.contains(f,n)})),u.map(function(n){var t=dom.withClosestSiblings(n,i),r=list.head(t),u=list.tail(t);return $.each(u,function(n,t){dom.appendChildNodes(r,t.childNodes);dom.remove(t)}),list.head(t)})):u)};this.current=function(n){var e=$(dom.isElement(n.sc)?n.sc:n.sc.parentNode),t=this.fromNode(e),r,u,i,f;try{t=$.extend(t,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal"})}catch(o){}return n.isOnList()?(r=["circle","disc","disc-leading-zero","square"],u=$.inArray(t["list-style-type"],r)>-1,t["list-style"]=u?"unordered":"ordered"):t["list-style"]="none",i=dom.ancestor(n.sc,dom.isPara),i&&i.style["line-height"]?t["line-height"]=i.style.lineHeight:(f=parseInt(t["line-height"],10)/parseInt(t["font-size"],10),t["line-height"]=f.toFixed(1)),t.anchor=n.isOnAnchor()&&dom.ancestor(n.sc,dom.isAnchor),t.ancestors=dom.listAncestor(n.sc,dom.isEditable),t.range=n,t}},Bullet=function(){var n=this;this.insertOrderedList=function(n){this.toggleList("OL",n)};this.insertUnorderedList=function(n){this.toggleList("UL",n)};this.indent=function(n){var i=this,t=range.create(n).wrapBodyInlineWithPara(),r=t.nodes(dom.isPara,{includeAncestor:!0}),u=list.clusterBy(r,func.peq2("parentNode"));$.each(u,function(n,t){var r=list.head(t);dom.isLi(r)?i.wrapList(t,r.parentNode.nodeName):$.each(t,function(n,t){$(t).css("marginLeft",function(n,t){return(parseInt(t,10)||0)+25})})});t.select()};this.outdent=function(n){var i=this,t=range.create(n).wrapBodyInlineWithPara(),r=t.nodes(dom.isPara,{includeAncestor:!0}),u=list.clusterBy(r,func.peq2("parentNode"));$.each(u,function(n,t){var r=list.head(t);dom.isLi(r)?i.releaseList([t]):$.each(t,function(n,t){$(t).css("marginLeft",function(n,t){return t=parseInt(t,10)||0,t>25?t-25:""})})});t.select()};this.toggleList=function(t,i){var f=range.create(i).wrapBodyInlineWithPara(),r=f.nodes(dom.isPara,{includeAncestor:!0}),s=f.paraBookmark(r),o=list.clusterBy(r,func.peq2("parentNode")),u,e;list.find(r,dom.isPurePara)?(u=[],$.each(o,function(i,r){u=u.concat(n.wrapList(r,t))}),r=u):(e=f.nodes(dom.isList,{includeAncestor:!0}).filter(function(n){return!$.nodeName(n,t)}),e.length?$.each(e,function(n,i){dom.replace(i,t)}):r=this.releaseList(o,!0));range.createFromParaBookmark(s,r).select()};this.wrapList=function(n,t){var u=list.head(n),i=list.last(n),e=dom.isList(u.previousSibling)&&u.previousSibling,r=dom.isList(i.nextSibling)&&i.nextSibling,f=e||dom.insertAfter(dom.create(t||"UL"),i);return n=n.map(function(n){return dom.isPurePara(n)?dom.replace(n,"LI"):n}),dom.appendChildNodes(f,n),r&&(dom.appendChildNodes(f,list.from(r.childNodes)),dom.remove(r)),n};this.releaseList=function(n,t){var i=[];return $.each(n,function(n,r){var f=list.head(r),o=list.last(r),u=t?dom.lastAncestor(f,dom.isList):f.parentNode,h=u.childNodes.length>1?dom.splitTree(u,{node:o.parentNode,offset:dom.position(o)+1},{isSkipPaddingBlankHTML:!0}):null,e=dom.splitTree(u,{node:f.parentNode,offset:dom.position(f)},{isSkipPaddingBlankHTML:!0}),s;r=t?dom.listDescendant(e,dom.isLi):list.from(e.childNodes).filter(dom.isLi);(t||!dom.isList(u.parentNode))&&(r=r.map(function(n){return dom.replace(n,"P")}));$.each(list.from(r).reverse(),function(n,t){dom.insertAfter(t,u)});s=list.compact([u,e,h]);$.each(s,function(n,t){var i=[t].concat(dom.listDescendant(t,dom.isList));$.each(i.reverse(),function(n,t){dom.nodeLength(t)||dom.remove(t,!0)})});i=i.concat(r)}),i}},Typing=function(){var n=new Bullet;this.insertTab=function(n,t){var i=dom.createText(new Array(t+1).join(dom.NBSP_CHAR));n=n.deleteContents();n.insertNode(i,!0);n=range.create(i,t);n.select()};this.insertParagraph=function(t){var u=range.create(t),i,r,f,e;if(u=u.deleteContents(),u=u.wrapBodyInlineWithPara(),i=dom.ancestor(u.sc,dom.isPara),i){if(dom.isEmpty(i)&&dom.isLi(i)){n.toggleList(i.parentNode.nodeName);return}dom.isEmpty(i)&&dom.isPara(i)&&dom.isBlockquote(i.parentNode)?(dom.insertAfter(i,i.parentNode),r=i):(r=dom.splitTree(i,u.getStartPoint()),f=dom.listDescendant(i,dom.isEmptyAnchor),f=f.concat(dom.listDescendant(r,dom.isEmptyAnchor)),$.each(f,function(n,t){dom.remove(t)}),(dom.isHeading(r)||dom.isPre(r))&&dom.isEmpty(r)&&(r=dom.replace(r,"p")))}else e=u.sc.childNodes[u.so],r=$(dom.emptyPara)[0],e?u.sc.insertBefore(r,e):u.sc.appendChild(r);range.create(r,0).normalize().select().scrollIntoView(t)}},Table=function(){this.tab=function(n,t){var i=dom.ancestor(n.commonAncestor(),dom.isCell),u=dom.ancestor(i,dom.isTable),f=dom.listDescendant(u,dom.isCell),r=list[t?"prev":"next"](f,i);r&&range.create(r,0).select()};this.createTable=function(n,t,i){for(var r,h,u,f,e=[],o,s=0;s<n;s++)e.push("<td>"+dom.blank+"<\/td>");for(o=e.join(""),r=[],u=0;u<t;u++)r.push("<tr>"+o+"<\/tr>");return h=r.join(""),f=$("<table>"+h+"<\/table>"),i&&i.tableClassName&&f.addClass(i.tableClassName),f[0]}},KEY_BOGUS="bogus",Editor=function(n){var h=this,k=n.layoutInfo.note,p=n.layoutInfo.editor,t=n.layoutInfo.editable,i=n.options,r=i.langInfo,f=t[0],l=null,e=new Style,y=new Table,w=new Typing,a=new Bullet,v=new History(t),b,u;this.initialize=function(){t.on("keydown",function(t){t.keyCode===key.code.ENTER&&n.triggerEvent("enter",t);n.triggerEvent("keydown",t);t.isDefaultPrevented()||(i.shortcuts?h.handleKeyMap(t):h.preventDefaultEditableShortCuts(t))}).on("keyup",function(t){n.triggerEvent("keyup",t)}).on("focus",function(t){n.triggerEvent("focus",t)}).on("blur",function(t){n.triggerEvent("blur",t)}).on("mousedown",function(t){n.triggerEvent("mousedown",t)}).on("mouseup",function(t){n.triggerEvent("mouseup",t)}).on("scroll",function(t){n.triggerEvent("scroll",t)}).on("paste",function(t){n.triggerEvent("paste",t)});t.html(dom.html(k)||dom.emptyPara);var r=agent.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";t.on(r,func.debounce(function(){n.triggerEvent("change",t.html())},250));p.on("focusin",function(t){n.triggerEvent("focusin",t)}).on("focusout",function(t){n.triggerEvent("focusout",t)});i.airMode||(i.width&&p.outerWidth(i.width),i.height&&t.outerHeight(i.height),i.maxHeight&&t.css("max-height",i.maxHeight),i.minHeight&&t.css("min-height",i.minHeight));v.recordUndo()};this.destroy=function(){t.off()};this.handleKeyMap=function(t){var e=i.keyMap[agent.isMac?"mac":"pc"],r=[],u,f;t.metaKey&&r.push("CMD");t.ctrlKey&&!t.altKey&&r.push("CTRL");t.shiftKey&&r.push("SHIFT");u=key.nameFromCode[t.keyCode];u&&r.push(u);f=e[r.join("+")];f?(t.preventDefault(),n.invoke(f)):key.isEdit(t.keyCode)&&this.afterCommand()};this.preventDefaultEditableShortCuts=function(n){(n.ctrlKey||n.metaKey)&&list.contains([66,73,85],n.keyCode)&&n.preventDefault()};this.createRange=function(){return this.focus(),range.create(f)};this.saveRange=function(n){l=this.createRange();n&&l.collapse().select()};this.restoreRange=function(){l&&(l.select(),this.focus())};this.saveTarget=function(n){t.data("target",n)};this.clearTarget=function(){t.removeData("target")};this.restoreTarget=function(){return t.data("target")};this.currentStyle=function(){var n=range.create();return n&&(n=n.normalize()),n?e.current(n):e.fromNode(t)};this.styleFromNode=function(n){return e.fromNode(n)};this.undo=function(){n.triggerEvent("before.command",t.html());v.undo();n.triggerEvent("change",t.html())};n.memo("help.undo",r.help.undo);this.redo=function(){n.triggerEvent("before.command",t.html());v.redo();n.triggerEvent("change",t.html())};n.memo("help.redo",r.help.redo);var o=this.beforeCommand=function(){n.triggerEvent("before.command",t.html());h.focus()},s=this.afterCommand=function(i){v.recordUndo();i||n.triggerEvent("change",t.html())},c=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","fontName"];for(u=0,b=c.length;u<b;u++)this[c[u]]=function(n){return function(t){o();document.execCommand(n,!1,t);s(!0)}}(c[u]),n.memo("help."+c[u],r.help[c[u]]);for(this.tab=function(){var n=this.createRange();n.isCollapsed()&&n.isOnCell()?y.tab(n):(o(),w.insertTab(n,i.tabSize),s())},n.memo("help.tab",r.help.tab),this.untab=function(){var n=this.createRange();n.isCollapsed()&&n.isOnCell()&&y.tab(n,!0)},n.memo("help.untab",r.help.untab),this.wrapCommand=function(n){return function(){o();n.apply(h,arguments);s()}},this.insertParagraph=this.wrapCommand(function(){w.insertParagraph(f)}),n.memo("help.insertParagraph",r.help.insertParagraph),this.insertOrderedList=this.wrapCommand(function(){a.insertOrderedList(f)}),n.memo("help.insertOrderedList",r.help.insertOrderedList),this.insertUnorderedList=this.wrapCommand(function(){a.insertUnorderedList(f)}),n.memo("help.insertUnorderedList",r.help.insertUnorderedList),this.indent=this.wrapCommand(function(){a.indent(f)}),n.memo("help.indent",r.help.indent),this.outdent=this.wrapCommand(function(){a.outdent(f)}),n.memo("help.outdent",r.help.outdent),this.insertImage=function(i,r){return async.createImage(i,r).then(function(n){o();typeof r=="function"?r(n):(typeof r=="string"&&n.attr("data-filename",r),n.css("width",Math.min(t.width(),n.width())));n.show();range.create(f).insertNode(n[0]);range.createFromNodeAfter(n[0]).select();s()}).fail(function(t){n.triggerEvent("image.upload.error",t)})},this.insertImages=function(t){$.each(t,function(t,u){var f=u.name;i.maximumImageFileSize&&i.maximumImageFileSize<u.size?n.triggerEvent("image.upload.error",r.image.maximumFileSizeError):async.readFileAsDataURL(u).then(function(n){return h.insertImage(n,f)}).fail(function(){n.triggerEvent("image.upload.error")})})},this.insertImagesOrCallback=function(t){var r=i.callbacks;r.onImageUpload?n.triggerEvent("image.upload",t):this.insertImages(t)},this.insertNode=this.wrapCommand(function(n){var t=this.createRange();t.insertNode(n);range.createFromNodeAfter(n).select()}),this.insertText=this.wrapCommand(function(n){var i=this.createRange(),t=i.insertNode(dom.createText(n));range.create(t,dom.nodeLength(t)).select()}),this.getSelectedText=function(){var n=this.createRange();return n.isOnAnchor()&&(n=range.createFromNode(dom.ancestor(n.sc,dom.isAnchor))),n.toString()},this.pasteHTML=this.wrapCommand(function(n){var t=this.createRange().pasteHTML(n);range.createFromNodeAfter(list.last(t)).select()}),this.formatBlock=this.wrapCommand(function(n){n=agent.isMSIE?"<"+n+">":n;document.execCommand("FormatBlock",!1,n)}),this.formatPara=function(){this.formatBlock("P")},n.memo("help.formatPara",r.help.formatPara),u=1;u<=6;u++)this["formatH"+u]=function(n){return function(){this.formatBlock("H"+n)}}(u),n.memo("help.formatH"+u,r.help["formatH"+u]);this.fontSize=function(n){var r=this.createRange(),u,i;r&&r.isCollapsed()?(u=e.styleNodes(r),i=list.head(u),$(u).css({"font-size":n+"px"}),i&&!dom.nodeLength(i)&&(i.innerHTML=dom.ZERO_WIDTH_NBSP_CHAR,range.createFromNodeAfter(i.firstChild).select(),t.data(KEY_BOGUS,i))):(o(),$(e.styleNodes(r)).css({"font-size":n+"px"}),s())};this.insertHorizontalRule=this.wrapCommand(function(){var n=this.createRange().insertNode(dom.create("HR"));n.nextSibling&&range.create(n.nextSibling,0).normalize().select()});n.memo("help.insertHorizontalRule",r.help.insertHorizontalRule);this.removeBogus=function(){var n=t.data(KEY_BOGUS),i,r;n&&(i=list.find(list.from(n.childNodes),dom.isText),r=i.nodeValue.indexOf(dom.ZERO_WIDTH_NBSP_CHAR),r!==-1&&i.deleteData(r,1),dom.isEmpty(n)&&dom.remove(n),t.removeData(KEY_BOGUS))};this.lineHeight=this.wrapCommand(function(n){e.stylePara(this.createRange(),{lineHeight:n})});this.unlink=function(){var n=this.createRange(),t;n.isOnAnchor()&&(t=dom.ancestor(n.sc,dom.isAnchor),n=range.createFromNode(t),n.select(),o(),document.execCommand("unlink"),s())};this.createLink=this.wrapCommand(function(n){var t=n.url,f=n.text,c=n.isNewWindow,u=n.range||this.createRange(),l=u.toString()!==f,r,o;typeof t=="string"&&(t=t.trim());i.onCreateLink&&(t=i.onCreateLink(t));r=[];l?(u=u.deleteContents(),o=u.insertNode($("<A>"+f+"<\/A>")[0]),r.push(o)):r=e.styleNodes(u,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});$.each(r,function(n,i){t=/^[A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?/.test(t)?t:"http://"+t;$(i).attr("href",t);c?$(i).attr("target","_blank"):$(i).removeAttr("target")});var a=range.createFromNodeBefore(list.head(r)),s=a.getStartPoint(),v=range.createFromNodeAfter(list.last(r)),h=v.getEndPoint();range.create(s.node,s.offset,h.node,h.offset).select()});this.getLinkInfo=function(){var t=this.createRange().expand(dom.isAnchor),n=$(list.head(t.nodes(dom.isAnchor)));return{range:t,text:t.toString(),isNewWindow:n.length?n.attr("target")==="_blank":!1,url:n.length?n.attr("href"):""}};this.color=this.wrapCommand(function(n){var t=n.foreColor,i=n.backColor;t&&document.execCommand("foreColor",!1,t);i&&document.execCommand("backColor",!1,i)});this.insertTable=this.wrapCommand(function(n){var t=n.split("x"),r=this.createRange().deleteContents();r.insertNode(y.createTable(t[0],t[1],i))});this.floatMe=this.wrapCommand(function(n){var t=$(this.restoreTarget());t.css("float",n)});this.resize=this.wrapCommand(function(n){var t=$(this.restoreTarget());t.css({width:n*100+"%",height:""})});this.resizeTo=function(n,t,i){var u,f,r;i?(f=n.y/n.x,r=t.data("ratio"),u={width:r>f?n.x:n.y/r,height:r>f?n.x*r:n.y}):u={width:n.x,height:n.y};t.css(u)};this.removeMedia=this.wrapCommand(function(){var i=$(this.restoreTarget()).detach();n.triggerEvent("media.delete",i,t)});this.hasFocus=function(){return t.is(":focus")};this.focus=function(){this.hasFocus()||t.focus()};this.isEmpty=function(){return dom.isEmpty(t[0])||dom.emptyPara===t.html()};this.empty=function(){n.invoke("code",dom.emptyPara)}},Clipboard=function(n){var t=this,i=n.layoutInfo.editable;this.events={"summernote.keydown":function(i,r){t.needKeydownHook()&&(r.ctrlKey||r.metaKey)&&r.keyCode===key.code.V&&(n.invoke("editor.saveRange"),t.$paste.focus(),setTimeout(function(){t.pasteByHook()},0))}};this.needKeydownHook=function(){return agent.isMSIE&&agent.browserVersion>10||agent.isFF};this.initialize=function(){if(this.needKeydownHook()){this.$paste=$('<div tabindex="-1" />').attr("contenteditable",!0).css({position:"absolute",left:-1e5,opacity:0});i.before(this.$paste);this.$paste.on("paste",function(t){n.triggerEvent("paste",t)})}else i.on("paste",this.pasteByEvent)};this.destroy=function(){this.needKeydownHook()&&(this.$paste.remove(),this.$paste=null)};this.pasteByHook=function(){var f=this.$paste[0].firstChild,t,r,u;if(dom.isImg(f)){var o=f.src,i=atob(o.split(",")[1]),e=new Uint8Array(i.length);for(t=0;t<i.length;t++)e[t]=i.charCodeAt(t);r=new Blob([e],{type:"image/png"});r.name="clipboard.png";n.invoke("editor.restoreRange");n.invoke("editor.focus");n.invoke("editor.insertImagesOrCallback",[r])}else u=$("<div />").html(this.$paste.html()).html(),n.invoke("editor.restoreRange"),n.invoke("editor.focus"),u&&n.invoke("editor.pasteHTML",u);this.$paste.empty()};this.pasteByEvent=function(t){var i=t.originalEvent.clipboardData,r;i&&i.items&&i.items.length&&(r=list.head(i.items),r.kind==="file"&&r.type.indexOf("image/")!==-1&&n.invoke("editor.insertImagesOrCallback",[r.getAsFile()]),n.invoke("editor.afterCommand"))}},Dropzone=function(n){var u=$(document),i=n.layoutInfo.editor,o=n.layoutInfo.editable,e=n.options,f=e.langInfo,t={},r=$('<div class="note-dropzone">  <div class="note-dropzone-message"/><\/div>').prependTo(i),s=function(){Object.keys(t).forEach(function(n){u.off(n.substr(2).toLowerCase(),t[n])});t={}};this.initialize=function(){if(e.disableDragAndDrop){t.onDrop=function(n){n.preventDefault()};u.on("drop",t.onDrop)}else this.attachDragAndDropEvent()};this.attachDragAndDropEvent=function(){var e=$(),s=r.find(".note-dropzone-message");t.onDragenter=function(t){var u=n.invoke("codeview.isActivated"),o=i.width()>0&&i.height()>0;u||e.length||!o||(i.addClass("dragover"),r.width(i.width()),r.height(i.height()),s.text(f.image.dragImageHere));e=e.add(t.target)};t.onDragleave=function(n){e=e.not(n.target);e.length||i.removeClass("dragover")};t.onDrop=function(){e=$();i.removeClass("dragover")};u.on("dragenter",t.onDragenter).on("dragleave",t.onDragleave).on("drop",t.onDrop);r.on("dragenter",function(){r.addClass("hover");s.text(f.image.dropImage)}).on("dragleave",function(){r.removeClass("hover");s.text(f.image.dragImageHere)});r.on("drop",function(t){var i=t.originalEvent.dataTransfer;i&&i.files&&i.files.length?(t.preventDefault(),o.focus(),n.invoke("editor.insertImagesOrCallback",i.files)):$.each(i.types,function(t,r){var u=i.getData(r);r.toLowerCase().indexOf("text")>-1?n.invoke("editor.pasteHTML",u):$(u).each(function(){n.invoke("editor.insertNode",this)})})}).on("dragover",!1)};this.destroy=function(){s()}},CodeMirror;agent.hasCodeMirror&&(agent.isSupportAmd?require(["codemirror"],function(n){CodeMirror=n}):CodeMirror=window.CodeMirror);var Codeview=function(n){var u=n.layoutInfo.editor,i=n.layoutInfo.editable,t=n.layoutInfo.codable,r=n.options;this.sync=function(){var n=this.isActivated();n&&agent.hasCodeMirror&&t.data("cmEditor").save()};this.isActivated=function(){return u.hasClass("codeview")};this.toggle=function(){this.isActivated()?this.deactivate():this.activate();n.triggerEvent("codeview.toggled")};this.activate=function(){var f,e;if(t.val(dom.html(i,r.prettifyHtml)),t.height(i.height()),n.invoke("toolbar.updateCodeview",!0),u.addClass("codeview"),t.focus(),agent.hasCodeMirror){if(f=CodeMirror.fromTextArea(t[0],r.codemirror),r.codemirror.tern){e=new CodeMirror.TernServer(r.codemirror.tern);f.ternServer=e;f.on("cursorActivity",function(n){e.updateArgHints(n)})}f.setSize(null,i.outerHeight());t.data("cmEditor",f)}};this.deactivate=function(){var f,e,o;agent.hasCodeMirror&&(f=t.data("cmEditor"),t.val(f.getValue()),f.toTextArea());e=dom.value(t,r.prettifyHtml)||dom.emptyPara;o=i.html()!==e;i.html(e);i.height(r.height?t.height():"auto");u.removeClass("codeview");o&&n.triggerEvent("change",i.html(),i);i.focus();n.invoke("toolbar.updateCodeview",!1)};this.destroy=function(){this.isActivated()&&this.deactivate()}},EDITABLE_PADDING=24,Statusbar=function(n){var i=$(document),r=n.layoutInfo.statusbar,u=n.layoutInfo.editable,t=n.options;this.initialize=function(){if(!t.airMode&&!t.disableResizeEditor)r.on("mousedown",function(n){n.preventDefault();n.stopPropagation();var r=u.offset().top-i.scrollTop();i.on("mousemove",function(n){var i=n.clientY-(r+EDITABLE_PADDING);i=t.minheight>0?Math.max(i,t.minheight):i;i=t.maxHeight>0?Math.min(i,t.maxHeight):i;u.height(i)}).one("mouseup",function(){i.off("mousemove")})})};this.destroy=function(){r.off();r.remove()}},Fullscreen=function(n){var u=n.layoutInfo.editor,e=n.layoutInfo.toolbar,t=n.layoutInfo.editable,i=n.layoutInfo.codable,r=$(window),f=$("html, body");this.toggle=function(){var o=function(n){t.css("height",n.h);i.css("height",n.h);i.data("cmeditor")&&i.data("cmeditor").setsize(null,n.h)};u.toggleClass("fullscreen");this.isFullscreen()?(t.data("orgHeight",t.css("height")),r.on("resize",function(){o({h:r.height()-e.outerHeight()})}).trigger("resize"),f.css("overflow","hidden")):(r.off("resize"),o({h:t.data("orgHeight")}),f.css("overflow","visible"));n.invoke("toolbar.updateFullscreen",this.isFullscreen())};this.isFullscreen=function(){return u.hasClass("fullscreen")}},Handle=function(n){var t=this,i=$(document),u=n.layoutInfo.editingArea,r=n.options;this.events={"summernote.mousedown":function(n,i){t.update(i.target)&&i.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){t.update()}};this.initialize=function(){this.$handle=$(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"><\/div>','<div class="note-control-holder note-control-nw"><\/div>','<div class="note-control-holder note-control-ne"><\/div>','<div class="note-control-holder note-control-sw"><\/div>','<div class="',r.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"><\/div>',r.disableResizeImage?"":'<div class="note-control-selection-info"><\/div>',"<\/div>","<\/div>"].join("")).prependTo(u);this.$handle.on("mousedown",function(r){if(dom.isControlSizing(r.target)){r.preventDefault();r.stopPropagation();var u=t.$handle.find(".note-control-selection").data("target"),f=u.offset(),e=i.scrollTop();i.on("mousemove",function(i){n.invoke("editor.resizeTo",{x:i.clientX-f.left,y:i.clientY-(f.top-e)},u,!i.shiftKey);t.update(u[0])}).one("mouseup",function(t){t.preventDefault();i.off("mousemove");n.invoke("editor.afterCommand")});u.data("ratio")||u.data("ratio",u.height()/u.width())}})};this.destroy=function(){this.$handle.remove()};this.update=function(t){var u=dom.isImg(t),f=this.$handle.find(".note-control-selection"),o;if(n.invoke("imagePopover.update",t),u){var i=$(t),e=i.position(),r={w:i.outerWidth(!0),h:i.outerHeight(!0)};f.css({display:"block",left:e.left,top:e.top,width:r.w,height:r.h}).data("target",i);o=r.w+"x"+r.h;f.find(".note-control-selection-info").text(o);n.invoke("editor.saveTarget",t)}else this.hide();return u};this.hide=function(){n.invoke("editor.clearTarget");this.$handle.children().hide()}},AutoLink=function(n){var t=this,i="http://",r=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i;this.events={"summernote.keyup":function(n,i){i.isDefaultPrevented()||t.handleKeyup(i)},"summernote.keydown":function(n,i){t.handleKeydown(i)}};this.initialize=function(){this.lastWordRange=null};this.destroy=function(){this.lastWordRange=null};this.replace=function(){var t,u,f,e;this.lastWordRange&&(t=this.lastWordRange.toString(),u=t.match(r),u&&(u[1]||u[2])&&(f=u[1]?t:i+t,e=$("<a />").html(t).attr("href",f)[0],this.lastWordRange.insertNode(e),this.lastWordRange=null,n.invoke("editor.focus")))};this.handleKeydown=function(t){if(list.contains([key.code.ENTER,key.code.SPACE],t.keyCode)){var i=n.invoke("editor.createRange").getWordRange();this.lastWordRange=i}};this.handleKeyup=function(n){list.contains([key.code.ENTER,key.code.SPACE],n.keyCode)&&this.replace()}},AutoSync=function(n){var t=n.layoutInfo.note;this.events={"summernote.change":function(){t.val(n.invoke("code"))}};this.shouldInitialize=function(){return dom.isTextarea(t[0])}},Placeholder=function(n){var t=this,r=n.layoutInfo.editingArea,i=n.options;this.events={"summernote.init summernote.change":function(){t.update()},"summernote.codeview.toggled":function(){t.update()}};this.shouldInitialize=function(){return!!i.placeholder};this.initialize=function(){this.$placeholder=$('<div class="note-placeholder">');this.$placeholder.on("click",function(){n.invoke("focus")}).text(i.placeholder).prependTo(r)};this.destroy=function(){this.$placeholder.remove()};this.update=function(){var t=!n.invoke("codeview.isActivated")&&n.invoke("editor.isEmpty");this.$placeholder.toggle(t)}},Buttons=function(n){var f=this,t=$.summernote.ui,e=n.layoutInfo.toolbar,i=n.options,r=i.langInfo,o=func.invertObject(i.keyMap[agent.isMac?"mac":"pc"]),u=this.representShortcut=function(n){var t=o[n];return!i.shortcuts||!t?"":(agent.isMac&&(t=t.replace("CMD","â").replace("SHIFT","â§")),t=t.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")," ("+t+")")};this.initialize=function(){this.addToolbarButtons();this.addImagePopoverButtons();this.addLinkPopoverButtons();this.fontInstalledMap={}};this.destroy=function(){delete this.fontInstalledMap};this.isFontInstalled=function(n){return f.fontInstalledMap.hasOwnProperty(n)||(f.fontInstalledMap[n]=agent.isFontInstalled(n)||list.contains(i.fontNamesIgnoreCheck,n)),f.fontInstalledMap[n]};this.addToolbarButtons=function(){n.memo("button.style",function(){return t.buttonGroup([t.button({className:"dropdown-toggle",contents:t.icon(i.icons.magic)+" "+t.icon(i.icons.caret,"span"),tooltip:r.style.style,data:{toggle:"dropdown"}}),t.dropdown({className:"dropdown-style",items:n.options.styleTags,template:function(n){typeof n=="string"&&(n={tag:n,title:r.style.hasOwnProperty(n)?r.style[n]:n});var t=n.tag,i=n.title,u=n.style?' style="'+n.style+'" ':"",f=n.className?' class="'+n.className+'"':"";return"<"+t+u+f+">"+i+"<\/"+t+">"},click:n.createInvokeHandler("editor.formatBlock")})]).render()});n.memo("button.bold",function(){return t.button({className:"note-btn-bold",contents:t.icon(i.icons.bold),tooltip:r.font.bold+u("bold"),click:n.createInvokeHandler("editor.bold")}).render()});n.memo("button.italic",function(){return t.button({className:"note-btn-italic",contents:t.icon(i.icons.italic),tooltip:r.font.italic+u("italic"),click:n.createInvokeHandler("editor.italic")}).render()});n.memo("button.underline",function(){return t.button({className:"note-btn-underline",contents:t.icon(i.icons.underline),tooltip:r.font.underline+u("underline"),click:n.createInvokeHandler("editor.underline")}).render()});n.memo("button.clear",function(){return t.button({contents:t.icon(i.icons.eraser),tooltip:r.font.clear+u("removeFormat"),click:n.createInvokeHandler("editor.removeFormat")}).render()});n.memo("button.strikethrough",function(){return t.button({className:"note-btn-strikethrough",contents:t.icon(i.icons.strikethrough),tooltip:r.font.strikethrough+u("strikethrough"),click:n.createInvokeHandler("editor.strikethrough")}).render()});n.memo("button.superscript",function(){return t.button({className:"note-btn-superscript",contents:t.icon(i.icons.superscript),tooltip:r.font.superscript,click:n.createInvokeHandler("editor.superscript")}).render()});n.memo("button.subscript",function(){return t.button({className:"note-btn-subscript",contents:t.icon(i.icons.subscript),tooltip:r.font.subscript,click:n.createInvokeHandler("editor.subscript")}).render()});n.memo("button.fontname",function(){return t.buttonGroup([t.button({className:"dropdown-toggle",contents:'<span class="note-current-fontname"/> '+t.icon(i.icons.caret,"span"),tooltip:r.font.name,data:{toggle:"dropdown"}}),t.dropdownCheck({className:"dropdown-fontname",checkClassName:i.icons.menuCheck,items:i.fontNames.filter(f.isFontInstalled),template:function(n){return'<span style="font-family:'+n+'">'+n+"<\/span>"},click:n.createInvokeHandler("editor.fontName")})]).render()});n.memo("button.fontsize",function(){return t.buttonGroup([t.button({className:"dropdown-toggle",contents:'<span class="note-current-fontsize"/>'+t.icon(i.icons.caret,"span"),tooltip:r.font.size,data:{toggle:"dropdown"}}),t.dropdownCheck({className:"dropdown-fontsize",checkClassName:i.icons.menuCheck,items:i.fontSizes,click:n.createInvokeHandler("editor.fontSize")})]).render()});n.memo("button.color",function(){return t.buttonGroup({className:"note-color",children:[t.button({className:"note-current-color-button",contents:t.icon(i.icons.font+" note-recent-color"),tooltip:r.color.recent,click:function(t){var i=$(t.currentTarget);n.invoke("editor.color",{backColor:i.attr("data-backColor"),foreColor:i.attr("data-foreColor")})},callback:function(n){var t=n.find(".note-recent-color");t.css("background-color","#FFFF00");n.attr("data-backColor","#FFFF00")}}),t.button({className:"dropdown-toggle",contents:t.icon(i.icons.caret,"span"),tooltip:r.color.more,data:{toggle:"dropdown"}}),t.dropdown({items:["<li>",'<div class="btn-group">','  <div class="note-palette-title">'+r.color.background+"<\/div>","  <div>",'    <button type="button" class="note-color-reset btn btn-default" data-event="backColor" data-value="inherit">',r.color.transparent,"    <\/button>","  <\/div>",'  <div class="note-holder" data-event="backColor"/>',"<\/div>",'<div class="btn-group">','  <div class="note-palette-title">'+r.color.foreground+"<\/div>","  <div>",'    <button type="button" class="note-color-reset btn btn-default" data-event="removeFormat" data-value="foreColor">',r.color.resetToDefault,"    <\/button>","  <\/div>",'  <div class="note-holder" data-event="foreColor"/>',"<\/div>","<\/li>"].join(""),callback:function(n){n.find(".note-holder").each(function(){var n=$(this);n.append(t.palette({colors:i.colors,eventName:n.data("event")}).render())})},click:function(t){var i=$(t.target),r=i.data("event"),u=i.data("value");if(r&&u){var f=r==="backColor"?"background-color":"color",e=i.closest(".note-color").find(".note-recent-color"),o=i.closest(".note-color").find(".note-current-color-button");e.css(f,u);o.attr("data-"+r,u);n.invoke("editor."+r,u)}}})]}).render()});n.memo("button.ul",function(){return t.button({contents:t.icon(i.icons.unorderedlist),tooltip:r.lists.unordered+u("insertUnorderedList"),click:n.createInvokeHandler("editor.insertUnorderedList")}).render()});n.memo("button.ol",function(){return t.button({contents:t.icon(i.icons.orderedlist),tooltip:r.lists.ordered+u("insertOrderedList"),click:n.createInvokeHandler("editor.insertOrderedList")}).render()});var e=t.button({contents:t.icon(i.icons.alignLeft),tooltip:r.paragraph.left+u("justifyLeft"),click:n.createInvokeHandler("editor.justifyLeft")}),o=t.button({contents:t.icon(i.icons.alignCenter),tooltip:r.paragraph.center+u("justifyCenter"),click:n.createInvokeHandler("editor.justifyCenter")}),s=t.button({contents:t.icon(i.icons.alignRight),tooltip:r.paragraph.right+u("justifyRight"),click:n.createInvokeHandler("editor.justifyRight")}),h=t.button({contents:t.icon(i.icons.alignJustify),tooltip:r.paragraph.justify+u("justifyFull"),click:n.createInvokeHandler("editor.justifyFull")}),c=t.button({contents:t.icon(i.icons.outdent),tooltip:r.paragraph.outdent+u("outdent"),click:n.createInvokeHandler("editor.outdent")}),l=t.button({contents:t.icon(i.icons.indent),tooltip:r.paragraph.indent+u("indent"),click:n.createInvokeHandler("editor.indent")});n.memo("button.justifyLeft",func.invoke(e,"render"));n.memo("button.justifyCenter",func.invoke(o,"render"));n.memo("button.justifyRight",func.invoke(s,"render"));n.memo("button.justifyFull",func.invoke(h,"render"));n.memo("button.outdent",func.invoke(c,"render"));n.memo("button.indent",func.invoke(l,"render"));n.memo("button.paragraph",function(){return t.buttonGroup([t.button({className:"dropdown-toggle",contents:t.icon(i.icons.alignLeft)+" "+t.icon(i.icons.caret,"span"),tooltip:r.paragraph.paragraph,data:{toggle:"dropdown"}}),t.dropdown([t.buttonGroup({className:"note-align",children:[e,o,s,h]}),t.buttonGroup({className:"note-list",children:[c,l]})])]).render()});n.memo("button.height",function(){return t.buttonGroup([t.button({className:"dropdown-toggle",contents:t.icon(i.icons.textHeight)+" "+t.icon(i.icons.caret,"span"),tooltip:r.font.height,data:{toggle:"dropdown"}}),t.dropdownCheck({items:i.lineHeights,checkClassName:i.icons.menuCheck,className:"dropdown-line-height",click:n.createInvokeHandler("editor.lineHeight")})]).render()});n.memo("button.table",function(){return t.buttonGroup([t.button({className:"dropdown-toggle",contents:t.icon(i.icons.table)+" "+t.icon(i.icons.caret,"span"),tooltip:r.table.table,data:{toggle:"dropdown"}}),t.dropdown({className:"note-table",items:'<div class="note-dimension-picker">  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>  <div class="note-dimension-picker-highlighted"/>  <div class="note-dimension-picker-unhighlighted"/><\/div><div class="note-dimension-display">1 x 1<\/div>'})],{callback:function(t){var r=t.find(".note-dimension-picker-mousecatcher");r.css({width:i.insertTableMaxSize.col+"em",height:i.insertTableMaxSize.row+"em"}).mousedown(n.createInvokeHandler("editor.insertTable")).on("mousemove",f.tableMoveHandler)}}).render()});n.memo("button.link",function(){return t.button({contents:t.icon(i.icons.link),tooltip:r.link.link+u("linkDialog.show"),click:n.createInvokeHandler("linkDialog.show")}).render()});n.memo("button.picture",function(){return t.button({contents:t.icon(i.icons.picture),tooltip:r.image.image,click:n.createInvokeHandler("imageDialog.show")}).render()});n.memo("button.video",function(){return t.button({contents:t.icon(i.icons.video),tooltip:r.video.video,click:n.createInvokeHandler("videoDialog.show")}).render()});n.memo("button.hr",function(){return t.button({contents:t.icon(i.icons.minus),tooltip:r.hr.insert+u("insertHorizontalRule"),click:n.createInvokeHandler("editor.insertHorizontalRule")}).render()});n.memo("button.fullscreen",function(){return t.button({className:"btn-fullscreen",contents:t.icon(i.icons.arrowsAlt),tooltip:r.options.fullscreen,click:n.createInvokeHandler("fullscreen.toggle")}).render()});n.memo("button.codeview",function(){return t.button({className:"btn-codeview",contents:t.icon(i.icons.code),tooltip:r.options.codeview,click:n.createInvokeHandler("codeview.toggle")}).render()});n.memo("button.redo",function(){return t.button({contents:t.icon(i.icons.redo),tooltip:r.history.redo+u("redo"),click:n.createInvokeHandler("editor.redo")}).render()});n.memo("button.undo",function(){return t.button({contents:t.icon(i.icons.undo),tooltip:r.history.undo+u("undo"),click:n.createInvokeHandler("editor.undo")}).render()});n.memo("button.help",function(){return t.button({contents:t.icon(i.icons.question),tooltip:r.options.help,click:n.createInvokeHandler("helpDialog.show")}).render()})};this.addImagePopoverButtons=function(){n.memo("button.imageSize100",function(){return t.button({contents:'<span class="note-fontsize-10">100%<\/span>',tooltip:r.image.resizeFull,click:n.createInvokeHandler("editor.resize","1")}).render()});n.memo("button.imageSize50",function(){return t.button({contents:'<span class="note-fontsize-10">50%<\/span>',tooltip:r.image.resizeHalf,click:n.createInvokeHandler("editor.resize","0.5")}).render()});n.memo("button.imageSize25",function(){return t.button({contents:'<span class="note-fontsize-10">25%<\/span>',tooltip:r.image.resizeQuarter,click:n.createInvokeHandler("editor.resize","0.25")}).render()});n.memo("button.floatLeft",function(){return t.button({contents:t.icon(i.icons.alignLeft),tooltip:r.image.floatLeft,click:n.createInvokeHandler("editor.floatMe","left")}).render()});n.memo("button.floatRight",function(){return t.button({contents:t.icon(i.icons.alignRight),tooltip:r.image.floatRight,click:n.createInvokeHandler("editor.floatMe","right")}).render()});n.memo("button.floatNone",function(){return t.button({contents:t.icon(i.icons.alignJustify),tooltip:r.image.floatNone,click:n.createInvokeHandler("editor.floatMe","none")}).render()});n.memo("button.removeMedia",function(){return t.button({contents:t.icon(i.icons.trash),tooltip:r.image.remove,click:n.createInvokeHandler("editor.removeMedia")}).render()})};this.addLinkPopoverButtons=function(){n.memo("button.linkDialogShow",function(){return t.button({contents:t.icon(i.icons.link),tooltip:r.link.edit,click:n.createInvokeHandler("linkDialog.show")}).render()});n.memo("button.unlink",function(){return t.button({contents:t.icon(i.icons.unlink),tooltip:r.link.unlink,click:n.createInvokeHandler("editor.unlink")}).render()})};this.build=function(i,r){for(var e,l,u,f=0,o=r.length;f<o;f++){var s=r[f],a=s[0],h=s[1],c=t.buttonGroup({className:"note-"+a}).render();for(e=0,l=h.length;e<l;e++)u=n.memo("button."+h[e]),u&&c.append(typeof u=="function"?u(n):u);c.appendTo(i)}};this.updateCurrentStyle=function(){var t=n.invoke("editor.currentStyle"),u,i,r,o;this.updateBtnStates({".note-btn-bold":function(){return t["font-bold"]==="bold"},".note-btn-italic":function(){return t["font-italic"]==="italic"},".note-btn-underline":function(){return t["font-underline"]==="underline"},".note-btn-subscript":function(){return t["font-subscript"]==="subscript"},".note-btn-superscript":function(){return t["font-superscript"]==="superscript"},".note-btn-strikethrough":function(){return t["font-strikethrough"]==="strikethrough"}});t["font-family"]&&(u=t["font-family"].split(",").map(function(n){return n.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")}),i=list.find(u,f.isFontInstalled),e.find(".dropdown-fontname li a").each(function(){var n=$(this).data("value")+""==i+"";this.className=n?"checked":""}),e.find(".note-current-fontname").text(i));t["font-size"]&&(r=t["font-size"],e.find(".dropdown-fontsize li a").each(function(){var n=$(this).data("value")+""==r+"";this.className=n?"checked":""}),e.find(".note-current-fontsize").text(r));t["line-height"]&&(o=t["line-height"],e.find(".dropdown-line-height li a").each(function(){var n=$(this).data("value")+""==o+"";this.className=n?"checked":""}))};this.updateBtnStates=function(n){$.each(n,function(n,i){t.toggleBtnActive(e.find(n),i())})};this.tableMoveHandler=function(n){var e=18,r=$(n.target.parentNode),s=r.next(),h=r.find(".note-dimension-picker-mousecatcher"),c=r.find(".note-dimension-picker-highlighted"),o=r.find(".note-dimension-picker-unhighlighted"),u,f,t;n.offsetX===undefined?(f=$(n.target).offset(),u={x:n.pageX-f.left,y:n.pageY-f.top}):u={x:n.offsetX,y:n.offsetY};t={c:Math.ceil(u.x/e)||1,r:Math.ceil(u.y/e)||1};c.css({width:t.c+"em",height:t.r+"em"});h.data("value",t.c+"x"+t.r);3<t.c&&t.c<i.insertTableMaxSize.col&&o.css({width:t.c+1+"em"});3<t.r&&t.r<i.insertTableMaxSize.row&&o.css({height:t.r+1+"em"});s.html(t.c+" x "+t.r)}},Toolbar=function(n){var r=$.summernote.ui,u=n.layoutInfo.note,t=n.layoutInfo.toolbar,i=n.options;this.shouldInitialize=function(){return!i.airMode};this.initialize=function(){i.toolbar=i.toolbar||[];i.toolbar.length?n.invoke("buttons.build",t,i.toolbar):t.hide();i.toolbarContainer&&t.appendTo(i.toolbarContainer);u.on("summernote.keyup summernote.mouseup summernote.change",function(){n.invoke("buttons.updateCurrentStyle")});n.invoke("buttons.updateCurrentStyle")};this.destroy=function(){t.children().remove()};this.updateFullscreen=function(n){r.toggleBtnActive(t.find(".btn-fullscreen"),n)};this.updateCodeview=function(n){r.toggleBtnActive(t.find(".btn-codeview"),n);n?this.deactivate():this.activate()};this.activate=function(n){var i=t.find("button");n||(i=i.not(".btn-codeview"));r.toggleBtn(i,!0)};this.deactivate=function(n){var i=t.find("button");n||(i=i.not(".btn-codeview"));r.toggleBtn(i,!1)}},LinkDialog=function(n){var t=this,i=$.summernote.ui,f=n.layoutInfo.editor,r=n.options,u=r.langInfo;this.initialize=function(){var n=r.dialogsInBody?$(document.body):f,t='<div class="form-group"><label>'+u.link.textToDisplay+'<\/label><input class="note-link-text form-control" type="text" /><\/div><div class="form-group"><label>'+u.link.url+'<\/label><input class="note-link-url form-control" type="text" value="http://" /><\/div>'+(r.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+u.link.openInNewWindow+"<\/label><\/div>"),e='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+u.link.insert+"<\/button>";this.$dialog=i.dialog({className:"link-dialog",title:u.link.insert,fade:r.dialogsFade,body:t,footer:e}).render().appendTo(n)};this.destroy=function(){i.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(n,t){n.on("keypress",function(n){n.keyCode===key.code.ENTER&&t.trigger("click")})};this.toggleLinkBtn=function(n,t,r){i.toggleBtn(n,t.val()&&r.val())};this.showLinkDialog=function(r){return $.Deferred(function(u){var f=t.$dialog.find(".note-link-text"),e=t.$dialog.find(".note-link-url"),o=t.$dialog.find(".note-link-btn"),s=t.$dialog.find("input[type=checkbox]");i.onDialogShown(t.$dialog,function(){var i,h;n.triggerEvent("dialog.shown");r.url||(r.url=r.text);f.val(r.text);i=function(){t.toggleLinkBtn(o,f,e);r.text=f.val()};f.on("input",i).on("paste",function(){setTimeout(i,0)});h=function(){t.toggleLinkBtn(o,f,e);r.text||f.val(e.val())};e.on("input",h).on("paste",function(){setTimeout(h,0)}).val(r.url).trigger("focus");t.toggleLinkBtn(o,f,e);t.bindEnterKey(e,o);t.bindEnterKey(f,o);s.prop("checked",r.isNewWindow);o.one("click",function(n){n.preventDefault();u.resolve({range:r.range,url:e.val(),text:f.val(),isNewWindow:s.is(":checked")});t.$dialog.modal("hide")})});i.onDialogHidden(t.$dialog,function(){f.off("input paste keypress");e.off("input paste keypress");o.off("click");u.state()==="pending"&&u.reject()});i.showDialog(t.$dialog)}).promise()};this.show=function(){var t=n.invoke("editor.getLinkInfo");n.invoke("editor.saveRange");this.showLinkDialog(t).then(function(t){n.invoke("editor.restoreRange");n.invoke("editor.createLink",t)}).fail(function(){n.invoke("editor.restoreRange")})};n.memo("help.linkDialog.show",r.langInfo.help["linkDialog.show"])},LinkPopover=function(n){var t=this,r=$.summernote.ui,i=n.options;this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){t.update()},"summernote.dialog.shown":function(){t.hide()}};this.shouldInitialize=function(){return!list.isEmpty(i.popover.link)};this.initialize=function(){this.$popover=r.popover({className:"note-link-popover",callback:function(n){var t=n.find(".popover-content");t.prepend('<span><a target="_blank"><\/a>&nbsp;<\/span>')}}).render().appendTo("body");var t=this.$popover.find(".popover-content");n.invoke("buttons.build",t,i.popover.link)};this.destroy=function(){this.$popover.remove()};this.update=function(){var t,i,r,u;if(!n.invoke("editor.hasFocus")){this.hide();return}t=n.invoke("editor.createRange");t.isCollapsed()&&t.isOnAnchor()?(i=dom.ancestor(t.sc,dom.isAnchor),r=$(i).attr("href"),this.$popover.find("a").attr("href",r).html(r),u=dom.posFromPlaceholder(i),this.$popover.css({display:"block",left:u.left,top:u.top})):this.hide()};this.hide=function(){this.$popover.hide()}},ImageDialog=function(n){var t=this,i=$.summernote.ui,f=n.layoutInfo.editor,r=n.options,u=r.langInfo;this.initialize=function(){var h=r.dialogsInBody?$(document.body):f,t="",n,e,o,s;r.maximumImageFileSize&&(n=Math.floor(Math.log(r.maximumImageFileSize)/Math.log(1024)),e=(r.maximumImageFileSize/Math.pow(1024,n)).toFixed(2)*1+" "+" KMGTP"[n]+"B",t="<small>"+u.image.maximumFileSize+" : "+e+"<\/small>");o='<div class="form-group note-group-select-from-files"><label>'+u.image.selectFromFiles+'<\/label><input class="note-image-input form-control" type="file" name="files" accept="image/*" multiple="multiple" />'+t+'<\/div><div class="form-group note-group-image-url" style="overflow:auto;"><label>'+u.image.url+'<\/label><input class="note-image-url form-control col-md-12" type="text" /><\/div>';s='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+u.image.insert+"<\/button>";this.$dialog=i.dialog({title:u.image.insert,fade:r.dialogsFade,body:o,footer:s}).render().appendTo(h)};this.destroy=function(){i.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(n,t){n.on("keypress",function(n){n.keyCode===key.code.ENTER&&t.trigger("click")})};this.show=function(){n.invoke("editor.saveRange");this.showImageDialog().then(function(r){i.hideDialog(t.$dialog);n.invoke("editor.restoreRange");typeof r=="string"?n.invoke("editor.insertImage",r):n.invoke("editor.insertImagesOrCallback",r)}).fail(function(){n.invoke("editor.restoreRange")})};this.showImageDialog=function(){return $.Deferred(function(r){var e=t.$dialog.find(".note-image-input"),u=t.$dialog.find(".note-image-url"),f=t.$dialog.find(".note-image-btn");i.onDialogShown(t.$dialog,function(){n.triggerEvent("dialog.shown");e.replaceWith(e.clone().on("change",function(){r.resolve(this.files||this.value)}).val(""));f.click(function(n){n.preventDefault();r.resolve(u.val())});u.on("keyup paste",function(){var n=u.val();i.toggleBtn(f,n)}).val("").trigger("focus");t.bindEnterKey(u,f)});i.onDialogHidden(t.$dialog,function(){e.off("change");u.off("keyup paste keypress");f.off("click");r.state()==="pending"&&r.reject()});i.showDialog(t.$dialog)})}},ImagePopover=function(n){var i=$.summernote.ui,t=n.options;this.shouldInitialize=function(){return!list.isEmpty(t.popover.image)};this.initialize=function(){this.$popover=i.popover({className:"note-image-popover"}).render().appendTo("body");var r=this.$popover.find(".popover-content");n.invoke("buttons.build",r,t.popover.image)};this.destroy=function(){this.$popover.remove()};this.update=function(n){if(dom.isImg(n)){var t=dom.posFromPlaceholder(n);this.$popover.css({display:"block",left:t.left,top:t.top})}else this.hide()};this.hide=function(){this.$popover.hide()}},VideoDialog=function(n){var t=this,i=$.summernote.ui,f=n.layoutInfo.editor,u=n.options,r=u.langInfo;this.initialize=function(){var n=u.dialogsInBody?$(document.body):f,t='<div class="form-group row-fluid"><label>'+r.video.url+' <small class="text-muted">'+r.video.providers+'<\/small><\/label><input class="note-video-url form-control span12" type="text" /><\/div>',e='<button href="#" class="btn btn-primary note-video-btn disabled" disabled>'+r.video.insert+"<\/button>";this.$dialog=i.dialog({title:r.video.insert,fade:u.dialogsFade,body:t,footer:e}).render().appendTo(n)};this.destroy=function(){i.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(n,t){n.on("keypress",function(n){n.keyCode===key.code.ENTER&&t.trigger("click")})};this.createVideoNode=function(n){var i=n.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/),r=n.match(/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/),u=n.match(/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/),f=n.match(/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/),e=n.match(/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/),o=n.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),h=n.match(/^.+.(mp4|m4v)$/),c=n.match(/^.+.(ogg|ogv)$/),l=n.match(/^.+.(webm)$/),t,s;if(i&&i[1].length===11)s=i[1],t=$("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+s).attr("width","640").attr("height","360");else if(r&&r[0].length)t=$("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+r[1]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(u&&u[0].length)t=$("<iframe>").attr("frameborder",0).attr("src",u[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(f&&f[3].length)t=$("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+f[3]).attr("width","640").attr("height","360");else if(e&&e[2].length)t=$("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+e[2]).attr("width","640").attr("height","360");else if(o&&o[1].length)t=$("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+o[1]);else if(h||c||l)t=$("<video controls>").attr("src",n).attr("width","640").attr("height","360");else return!1;return t.addClass("note-video-clip"),t[0]};this.show=function(){var r=n.invoke("editor.getSelectedText");n.invoke("editor.saveRange");this.showVideoDialog(r).then(function(r){i.hideDialog(t.$dialog);n.invoke("editor.restoreRange");var u=t.createVideoNode(r);u&&n.invoke("editor.insertNode",u)}).fail(function(){n.invoke("editor.restoreRange")})};this.showVideoDialog=function(r){return $.Deferred(function(u){var f=t.$dialog.find(".note-video-url"),e=t.$dialog.find(".note-video-btn");i.onDialogShown(t.$dialog,function(){n.triggerEvent("dialog.shown");f.val(r).on("input",function(){i.toggleBtn(e,f.val())}).trigger("focus");e.click(function(n){n.preventDefault();u.resolve(f.val())});t.bindEnterKey(f,e)});i.onDialogHidden(t.$dialog,function(){f.off("input");e.off("click");u.state()==="pending"&&u.reject()});i.showDialog(t.$dialog)})}},HelpDialog=function(n){var r=this,t=$.summernote.ui,u=n.layoutInfo.editor,i=n.options,f=i.langInfo;this.createShortCutList=function(){var t=i.keyMap[agent.isMac?"mac":"pc"];return Object.keys(t).map(function(i){var r=t[i],u=$('<div><div class="help-list-item"/><\/div>');return u.append($("<label><kbd>"+i+"<\/kdb><\/label>").css({width:180,"margin-right":10})).append($("<span/>").html(n.memo("help."+r)||r)),u.html()}).join("")};this.initialize=function(){var n=i.dialogsInBody?$(document.body):u,r='<p class="text-center"><a href="http://summernote.org/" target="_blank">Summernote 0.8.2<\/a> Â· <a href="https://github.com/summernote/summernote" target="_blank">Project<\/a> Â· <a href="https://github.com/summernote/summernote/issues" target="_blank">Issues<\/a><\/p>';this.$dialog=t.dialog({title:f.options.help,fade:i.dialogsFade,body:this.createShortCutList(),footer:r,callback:function(n){n.find(".modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(n)};this.destroy=function(){t.hideDialog(this.$dialog);this.$dialog.remove()};this.showHelpDialog=function(){return $.Deferred(function(i){t.onDialogShown(r.$dialog,function(){n.triggerEvent("dialog.shown");i.resolve()});t.showDialog(r.$dialog)}).promise()};this.show=function(){n.invoke("editor.saveRange");this.showHelpDialog().then(function(){n.invoke("editor.restoreRange")})}},AirPopover=function(n){var t=this,r=$.summernote.ui,i=n.options,u=20;this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){t.update()},"summernote.change summernote.dialog.shown":function(){t.hide()},"summernote.focusout":function(n,i){agent.isFF||i.relatedTarget&&dom.ancestor(i.relatedTarget,func.eq(t.$popover[0]))||t.hide()}};this.shouldInitialize=function(){return i.airMode&&!list.isEmpty(i.popover.air)};this.initialize=function(){this.$popover=r.popover({className:"note-air-popover"}).render().appendTo("body");var t=this.$popover.find(".popover-content");n.invoke("buttons.build",t,i.popover.air)};this.destroy=function(){this.$popover.remove()};this.update=function(){var i=n.invoke("editor.currentStyle"),r,t;i.range&&!i.range.isCollapsed()?(r=list.last(i.range.getClientRects()),r&&(t=func.rect2bnd(r),this.$popover.css({display:"block",left:Math.max(t.left+t.width/2,0)-u,top:t.top+t.height}))):this.hide()};this.hide=function(){this.$popover.hide()}},HintPopover=function(n){var t=this,f=$.summernote.ui,u=5,r=n.options.hint||[],e=n.options.hintDirection||"bottom",i=$.isArray(r)?r:[r];this.events={"summernote.keyup":function(n,i){i.isDefaultPrevented()||t.handleKeyup(i)},"summernote.keydown":function(n,i){t.handleKeydown(i)},"summernote.dialog.shown":function(){t.hide()}};this.shouldInitialize=function(){return i.length>0};this.initialize=function(){this.lastWordRange=null;this.$popover=f.popover({className:"note-hint-popover",hideArrow:!0,direction:""}).render().appendTo("body");this.$popover.hide();this.$content=this.$popover.find(".popover-content");this.$content.on("click",".note-hint-item",function(){t.$content.find(".active").removeClass("active");$(this).addClass("active");t.replace()})};this.destroy=function(){this.$popover.remove()};this.selectItem=function(n){this.$content.find(".active").removeClass("active");n.addClass("active");this.$content[0].scrollTop=n[0].offsetTop-this.$content.innerHeight()/2};this.moveDown=function(){var t=this.$content.find(".note-hint-item.active"),i=t.next(),n;i.length?this.selectItem(i):(n=t.parent().next(),n.length||(n=this.$content.find(".note-hint-group").first()),this.selectItem(n.find(".note-hint-item").first()))};this.moveUp=function(){var t=this.$content.find(".note-hint-item.active"),i=t.prev(),n;i.length?this.selectItem(i):(n=t.parent().prev(),n.length||(n=this.$content.find(".note-hint-group").last()),this.selectItem(n.find(".note-hint-item").last()))};this.replace=function(){var i=this.$content.find(".note-hint-item.active"),t;i.length&&(t=this.nodeFromItem(i),this.lastWordRange.insertNode(t),range.createFromNode(t).collapse().select(),this.lastWordRange=null,this.hide(),n.invoke("editor.focus"))};this.nodeFromItem=function(n){var r=i[n.data("index")],u=n.data("item"),t=r.content?r.content(u):u;return typeof t=="string"&&(t=dom.createText(t)),t};this.createItemTemplates=function(n,t){var r=i[n];return t.map(function(t,i){var u=$('<div class="note-hint-item"/>');return u.append(r.template?r.template(t):t+""),u.data({index:n,item:t}),n===0&&i===0&&u.addClass("active"),u})};this.handleKeydown=function(n){this.$popover.is(":visible")&&(n.keyCode===key.code.ENTER?(n.preventDefault(),this.replace()):n.keyCode===key.code.UP?(n.preventDefault(),this.moveUp()):n.keyCode===key.code.DOWN&&(n.preventDefault(),this.moveDown()))};this.searchKeyword=function(n,t,r){var u=i[n],f;u&&u.match.test(t)&&u.search?(f=u.match.exec(t),u.search(f[1],r)):r()};this.createGroup=function(n,i){var r=$('<div class="note-hint-group note-hint-group-'+n+'"/>');return this.searchKeyword(n,i,function(i){i=i||[];i.length&&(r.html(t.createItemTemplates(n,i)),t.show())}),r};this.handleKeyup=function(r){var o,s,f;if(list.contains([key.code.ENTER,key.code.UP,key.code.DOWN],r.keyCode)){if(r.keyCode===key.code.ENTER&&this.$popover.is(":visible"))return}else o=n.invoke("editor.createRange").getWordRange(),s=o.toString(),i.length&&s?(this.$content.empty(),f=func.rect2bnd(list.last(o.getClientRects())),f&&(this.$popover.hide(),this.lastWordRange=o,i.forEach(function(n,i){n.match.test(s)&&t.createGroup(i,s).appendTo(t.$content)}),e==="top"?this.$popover.css({left:f.left,top:f.top-this.$popover.outerHeight()-u}):this.$popover.css({left:f.left,top:f.top+f.height+u}))):this.hide()};this.show=function(){this.$popover.show()};this.hide=function(){this.$popover.hide()}};$.summernote=$.extend($.summernote,{version:"0.8.2",ui:ui,dom:dom,plugins:{},options:{modules:{editor:Editor,clipboard:Clipboard,dropzone:Dropzone,codeview:Codeview,statusbar:Statusbar,fullscreen:Fullscreen,handle:Handle,hintPopover:HintPopover,autoLink:AutoLink,autoSync:AutoSync,placeholder:Placeholder,buttons:Buttons,toolbar:Toolbar,linkDialog:LinkDialog,linkPopover:LinkPopover,imageDialog:ImageDialog,imagePopover:ImagePopover,videoDialog:VideoDialog,helpDialog:HelpDialog,airPopover:AirPopover},buttons:{},lang:"en-US",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:!1,width:null,height:null,focus:!1,tabSize:4,styleWithSpan:!0,shortcuts:!0,textareaAutoSync:!0,direction:null,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onEnter:null,onKeyup:null,onKeydown:null,onImageUpload:null,onImageUploadError:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}})});
/*
//# sourceMappingURL=summernote.min.js.map
*/